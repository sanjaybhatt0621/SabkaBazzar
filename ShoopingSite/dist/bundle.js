!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class s{constructor(){this.categoryURL="http://localhost:5000/categories",this.bannerURL="http://localhost:5000/banners",this.productURL="http://localhost:5000/products",this.addtoCartURL="http://localhost:5000/addToCart"}async getCategoryData(){try{return(await fetch(this.categoryURL)).json()}catch(t){console.log(t)}}async getBannerData(){try{return(await fetch(this.bannerURL)).json()}catch(t){console.log(t)}}async getProductData(){try{return(await fetch(this.productURL)).json()}catch(t){console.log(t)}}async getCartData(){try{return(await fetch(this.addtoCartURL)).json()}catch(t){console.log(t)}}}class r{constructor(){}parseRequestURL(){let t=(window.location.hash.slice(1).toLowerCase()||"/").split("/"),e={resource:null,id:null,verb:null};return e.resource=t[1],e.id=t[2],e.verb=t[3],e}addToCart(t){let e=JSON.parse(sessionStorage.getItem("cartItems")),n={},s=0,r=0,a=0;e||(e=[]);let i=!1;for(let n=0;n<e.length;n++)e[n].id==t.id&&(e[n].qty+=1,r=(s=e[n].qty)*e[n].price,i=!0),a+=e[n].qty;return i||((n=t).qty=1,r=n.price,s=1,a+=1,e.push(n)),sessionStorage.setItem("cartItems",JSON.stringify(e)),console.log("Adding : "+t.id+"and "+t.category),{qty:s,itemCost:r,totalQty:a}}minusFromCart(t){let e=JSON.parse(sessionStorage.getItem("cartItems")),n=0,s=0,r=!1,a=0;e||(e=[]);for(let i=0;i<e.length;i++)a+=e[i].qty,e[i].id==t.id&&(e[i].qty-=1,a-=1,n=e[i].qty,0==e[i].qty?(e.splice(i,1),0==e.length&&(r=!0),s=0):s=n*e[i].price);return sessionStorage.setItem("cartItems",JSON.stringify(e)),console.log("Adding : "+t.id+"and "+t.category),{qty:n,itemCost:s,totalQty:a,last:r}}getEmptyCartMarkup(){return'\n                <section class="cartEmpty">\n                <p>No items in your cart</p>\n                <p>Your favourite items are just a click away.\n                </section>'}getEmptyCartFooterMarkup(){return'<a class = "startShopping" href="#"><span>Start Shopping</span></a>'}findTotalCost(){let t=JSON.parse(sessionStorage.getItem("cartItems")),e=0;if(t)for(let n=0;n<t.length;n++)e+=t[n].qty*t[n].price;return e}}class a{constructor(t){this.parent=t,this.serviceFile=new s,this.Utils=new r,this.render()}render(){let t=0,e=0,n=JSON.parse(sessionStorage.getItem("cartItems"));if(n&&n.length>0)for(let s=0;s<n.length;s++){let r=n[s],a=r.qty*r.price;t+=parseInt(a),e+=n[s].qty;let i=`<section class="cartItem" id="cartItem_${r.id}">\n                        <article class="cartItemImage">\n                            <img src="${r.imageURL}"/>\n                        </article>\n                        <article class="cartItemText">\n                            <h1>${r.name}</h1>\n                            <p>\n                                <span class="leftCalc">  \n                                    <span class="cartButton" id="cartMinus_${r.id}">-</span>\n                                    <span id="itemQty_${r.id}">${r.qty}</span>\n                                    <span class="cartButton" id="cartAdd_${r.id}">+</span>\n                                        X  <span>Rs. ${r.price}</span>\n                                </span>   \n                                <span class="rightCalc">    \n                                <span class="grand-total" id="grandTotal_${r.id}">Rs. ${a}</span>\n                                </span>  \n                            </p>\n                        </article>\n                    </section>`;$(this.parent).append(i),$("#cartTotal").html("Rs. "+t+">");let c=function(){let t=this.Utils.addToCart(r);$("#itemQty_"+`${r.id}`).html(t.qty),$("#grandTotal_"+`${r.id}`).html("Rs. "+t.itemCost);let e=this.Utils.findTotalCost();$("#cartTotal").html("Rs. "+e+">"),$(".cartItemCount").html(`(${t.totalQty} Items)`),$(".mainHeaderQty").html(`${t.totalQty} Items`)}.bind(this);$("#cartAdd_"+`${r.id}`).on("click",c);let l=function(){let t=this.Utils.minusFromCart(r);if(t.qty>0){$("#itemQty_"+`${r.id}`).html(t.qty),$("#grandTotal_"+`${r.id}`).html("Rs. "+t.itemCost);let e=this.Utils.findTotalCost();$("#cartTotal").html("Rs. "+e+">")}else if(t.last){let t=this.Utils.getEmptyCartMarkup();$(".cartItemContainer").replaceWith(t),$(".discountBanner").replaceWith("");let e=this.Utils.getEmptyCartFooterMarkup();$(".cartFooter").html(e)}else $("#cartItem_"+`${r.id}`).html("");$(".cartItemCount").html(`(${t.totalQty} Items)`),$(".mainHeaderQty").html(`${t.totalQty} Items`)}.bind(this);$("#cartMinus_"+`${r.id}`).on("click",l)}$(".cartItemCount").html(`(${e} Items)`),$(".mainHeaderQty").html(`${e} Items`)}}class i{constructor(t){this.parent=t,this.Utils=new r,this.render()}render(){if($(this.parent).html('\n        <div class= "cartBackground">\n        <div class="overlay-content">\n        <main class="cartContainer">\n        <section class="cartHeader">\n                <article class="cartInfo">\n                    <h1 class="cartItemLabel">My Cart  &nbsp;</h1><h3 class="cartItemCount"></h3>\n                </article>\n                <article class="close">&times;</article>\n            </section>\n            <section class="cartItemContainer"></section>\n        </main>\n        <footer class="cartFooter">\n        </footer>\n        </div>\n        </div>'),$(".close").on("click",()=>{$(".cartBackground")[0].style.display="none",history.back()}),JSON.parse(sessionStorage.getItem("cartItems"))&&JSON.parse(sessionStorage.getItem("cartItems")).length>0){let t='<section class="discountBanner" role="banner">\n                    <article class="discountLogo">\n                        <img src="static/images/lowest-price.png" alt="">\n                    </article>\n                    <article class="discountBannerText">\n                        You won\'t find it cheaper anywhere\n                    </article>\n                </section>',e='<p>Promo code can be applied on payment page</p>\n                <a class="showTotals" href="#"><span>Proceed to checkout</span>\n                <span id="cartTotal"> </span></a>';$(".cartContainer").append(t),$(".cartFooter").append(e),new a(".cartItemContainer")}else{let t=this.Utils.getEmptyCartMarkup();$(".cartItemContainer").replaceWith(t);let e=this.Utils.getEmptyCartFooterMarkup();$(".cartFooter").html(e)}}}class c{constructor(t,e){this.imgUrl=e.bannerImageUrl,this.parent=t,this.render()}render(){let t=`\n        <div class="mySlides fade">\n          \n          \n            <img src=${this.imgUrl} style="width:100%">\n          \n          \n        </div>`;$(this.parent).append(t)}}var l;class o{constructor(t){this.parent=t,this.slideIndex=1,this.servicesFile=new s,this.render(),l=this}render(){this.servicesFile.getBannerData().then(t=>{$(this.parent).append('<div class="slideshow-container">\n        \n        <div id="carouselImage"></div>\n       \n            <a class="prev" id="prevButton">PREV</a>\n            <a class="next" id="nextButton">NEXT</a>\n            \n            \n        </div>\n        <div class ="carouselDots">\n            \n        </div>\n        ');let e=1;t.forEach(t=>{new c("#carouselImage",t);let n=`<span class="dot" id="dot_${e}"></span>`;$(".carouselDots").append(n),$("#dot_"+`${e}`).on("click",{counter:e},l.currentSlide),e++}),this.showSlides(1),$("#prevButton").on("click",{counter:-1},l.plusSlides),$("#nextButton").on("click",{counter:1},l.plusSlides)})}plusSlides(t){l.showSlides(l.slideIndex+=t.data.counter)}currentSlide(t){l.showSlides(l.slideIndex=t.data.counter)}showSlides(t){var e,n=document.getElementsByClassName("mySlides"),s=document.getElementsByClassName("dot");for(t>n.length&&(l.slideIndex=1),t<1&&(l.slideIndex=n.length),e=0;e<n.length;e++)n[e].style.display="none";for(e=0;e<s.length;e++)s[e].className=s[e].className.replace(" active","");n[l.slideIndex-1].style.display="block",s[l.slideIndex-1].className+=" active"}}class d{constructor(t){this.ServicesFile=new s,this.parent=t,this.render()}render(){let t=function(t,e){return t.order<e.order?-1:t.order>e.order?1:0};this.ServicesFile.getCategoryData().then(e=>{e.sort(t),e.forEach(t=>{if("true"==`${t.enabled}`){let e=`\n                    <div class="categoryBorder">\n                    &nbsp;\n                    </div>\n                    \n                        <section class="category ">\n                        \n                    <article class="menu-items">\n                            <img src="${t.imageUrl}"/>\n                        </article>\n                        <article class="description">\n                            <h2>${t.name}</h2>\n                            <p>${t.description}</p>\n                            <a href="#/products/${t.id}">Explore  &nbsp;${t.key}</a>\n                    </article>\n                    </section>\n                    `;$(this.parent).append(e)}})})}}class h{constructor(t,e){this.parent=t,this.request=e,this.render()}render(){$(this.parent).html('<section class="slider"></section><section class="category-containner"></section>'),this.carousel=new o(".slider"),this.banner=new d(".category-containner")}}class p{constructor(t){this.parent=t,this.serviceFile=new s,this.render()}render(){var t=0;this.serviceFile.getCategoryData().then(e=>{e.forEach(e=>{if(t++,"true"==`${e.enabled}`){let n=`\n                    <li class="init">\n                    <a href = "#/products/${e.id}">${e.name}</a>\n                    </li>\n                     `;t>1&&(n=`\n                        <li>\n                        <a href = "#/products/${e.id}">${e.name}</a>\n                        </li>\n                         `),$(this.parent).append(n)}})})}}class u{constructor(t,e){this.parent=t,this.id=e,this.serviceFile=new s,this.Utils=new r,this.render()}render(){const t={context:this};$(this.parent).html(""),this.serviceFile.getProductData(this.id).then(e=>{e.forEach(e=>{let n=this.returnMarkup(e);0!=this.id&&this.id==e.category?$(this.parent).append(n):0==this.id&&$(this.parent).append(n);let s=function(){let t=this.context.Utils.addToCart(e);$(".cartItemCount").html(`(${t.totalQty} Items)`),$(".mainHeaderQty").html(`${t.totalQty} Items`)}.bind(t);$("#add_"+`${e.id}`).on("click",s)})})}returnMarkup(t){return` <section class="itemSection">\n        <section class="itemWrapperDiv">\n        <h1>${t.name}</h1>\n        <section class="descContainner">\n            <article class="productsDiv">\n                    <img src="${t.imageURL}">\n            </article>\n            <article class="productRightMobile">\n                    <article class="productsDescription">\n                    ${t.description}\n                    </article>\n                    <article class="priceandBuySection">\n                        <span class="mrp" >MRP Rs.${t.price}</span>\n                        <span id="add_${t.id}"><a>Buy Now</a></span>\n                    </article>\n                    <article class="buyNowMobile">\n                        <a href="#" >Buy Now @ MRP Rs. <span>${t.price}</span></a>\n                       \n                    </article>\n            </article> \n        </section>        \n    </section>\n    </section>\n        `}}class m{constructor(t,e){this.parent=t,this.request=e,this.id=this.request&&this.request.id?this.request.id:0,this.render()}render(){$(this.parent).html('<main class="mainProducts">\n                <aside class="leftSection">\n                <ul>\n                </ul>\n                </aside>\n                <section class="rightSection"></section>\n        </main>'),new p(".leftSection ul"),new u(".rightSection",this.id),$("ul").on("click",".init",function(){$(this).closest("ul").children("li:not(.init)").toggle()});var t=$("ul").children("li:not(.init)");$("ul").on("click","li:not(.init)",function(){t.removeClass("selected"),$(this).addClass("selected"),$("ul").children(".init").html($(this).html()),t.toggle()})}}n.d(e,"default",function(){return g});class g{constructor(){this.utils=new r,this.render()}render(){let t={"/":h,"/cart":i,"/products/:id":m},e=()=>{document.getElementsByClassName(".mainHome");let e=this.utils.parseRequestURL(),n=(e.resource?"/"+e.resource:"/")+(e.id?"/:id":"")+(e.verb?"/"+e.verb:""),s=t[n]?t[n]:Error404;new s("/cart"==n?"#overlay":".mainHome",e)};window.addEventListener("hashchange",()=>{e()}),window.addEventListener("load",()=>{e()})}}new g}]);